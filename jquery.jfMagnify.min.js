!function(n){n.jfMagnify=function(t,e){function i(){r.css({"transform-origin":"top left",transform:"scale("+l.settings.scale+","+l.settings.scale+")",top:"0",width:c.get(0).getBoundingClientRect().width,height:c.get(0).getBoundingClientRect().height});var n=c.get(0).getBoundingClientRect().width,t=r.get(0).getBoundingClientRect().width,e=c.get(0).getBoundingClientRect().height,i=r.get(0).getBoundingClientRect().height;o=a(n,t),f=a(e,i),l.settings.center&&(h=r.parent().outerWidth()/2,y=r.parent().outerHeight()/2,p=d.outerWidth()/2,v=d.outerWidth()/2),g()}function g(){var n=s((d.position().left+p)/o),t=s((d.position().top+v)/f);r.css({left:n+h,top:t+y})}function a(n,t){var e;return e=n>t?t/n:n/t}function s(n){var t=-1*n;return t}var o,f,d,r,c,l=this,u=n(t),t=t,m=u.data(),h=0,y=0,p=0,v=0,w={center:!0,scale:2,containment:t,magnifyGlass:".magnify_glass",magnifiedElement:".magnified_element",magnifiedZone:".magnify_glass",elementToMagnify:".element_to_magnify"};l.settings={},l.init=function(){l.settings=n.extend({},w,e,m),n(window).bind("resize",i),console.log(l.settings.magnifiedZone),d=u.find(l.settings.magnifyGlass),$magnifiedZone=u.find(l.settings.magnifiedZone),c=u.find(l.settings.elementToMagnify);var t=c.clone(!0);r=n(t).removeAttr("id"),r.addClass(l.settings.magnifiedElement.slice(1)),$magnifiedZone.append(t),d.draggable({containment:l.settings.containment,drag:g}),i()},l.destroy=function(){n(window).unbind("resize",i),d.draggable("destroy"),u.removeData("jfMagnify",l),l=null},l.scaleMe=function(n){l.settings.scale=n,i()},l.init()},n.fn.jfMagnify=function(t){return this.each(function(){if(void 0==n(this).data("jfMagnify")){var e=new n.jfMagnify(this,t);n(this).data("jfMagnify",e)}})}}(jQuery);
