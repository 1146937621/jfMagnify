!function(t){t.jfMagnify=function(n,e){function i(){r.css({"transform-origin":"top left",transform:"scale("+l.settings.scale+","+l.settings.scale+")",top:"0",width:c.get(0).getBoundingClientRect().width,height:c.get(0).getBoundingClientRect().height});var t=c.get(0).getBoundingClientRect().width,n=r.get(0).getBoundingClientRect().width,e=c.get(0).getBoundingClientRect().height,i=r.get(0).getBoundingClientRect().height;o=a(t,n),f=a(e,i),l.settings.center&&(h=r.parent().outerWidth()/2,y=r.parent().outerHeight()/2,p=d.outerWidth()/2,v=d.outerWidth()/2),g()}function g(){var t=s((d.position().left+p)/o),n=s((d.position().top+v)/f);r.css({left:t+h,top:n+y})}function a(t,n){var e;return e=t>n?n/t:t/n}function s(t){var n=-1*t;return n}var o,f,d,r,c,l=this,u=t(n),n=n,m=u.data(),h=0,y=0,p=0,v=0,w={center:!0,scale:2,containment:n,magnifyGlass:".magnify_glass",magnifiedElement:".magnified_element",magnifiedZone:".magnify_glass",elementToMagnify:".element_to_magnify"};l.settings={},l.init=function(){l.settings=t.extend({},w,e,m),t(window).bind("resize",i),console.log(l.settings.containment),d=u.find(l.settings.magnifyGlass),$magnifiedZone=u.find(l.settings.magnifiedZone),c=u.find(l.settings.elementToMagnify);var n=c.clone(!0);r=t(n).removeAttr("id"),r.addClass(l.settings.magnifiedElement.slice(1)),$magnifiedZone.append(n),d.draggable({containment:l.settings.containment,drag:g}),i()},l.destroy=function(){t(window).unbind("resize",i),d.draggable("destroy"),u.removeData("jfMagnify",l),l=null},l.scaleMe=function(t){l.settings.scale=t,i()},l.init()},t.fn.jfMagnify=function(n){return this.each(function(){if(void 0==t(this).data("jfMagnify")){var e=new t.jfMagnify(this,n);t(this).data("jfMagnify",e)}})}}(jQuery);